# 新規録音 28 - 文字起こしと要約

**録音日**: 2025年10月14日
**ファイルサイズ**: 4.2MB
**文字起こし実施日**: 2025年10月14日
**参加者**: Kyopan / Suzuki @kyopalab
**使用ツール**: OpenAI Whisper (tiny model)

---

## 要約

### 主要テーマ
**Arduino/マイコンの電子回路設計 - ロジックレベルとプルアップ抵抗**

この録音は、Arduinoやマイコン（特にESP32-S3）を使った電子回路設計における基本的な概念について解説した技術講義です。主に以下のトピックをカバーしています：

1. **ロジックレベル（Logic Level）**
2. **ハイインピーダンス（High Impedance）**
3. **プルアップ抵抗（Pull-up Resistor）**
4. **スイッチ入力の回路設計**
5. **ノイズ対策**

---

## 詳細内容

### 1. ロジックレベルの基礎

**ロジックレベルとは**:
- デジタル回路における電圧の基準値
- 一般的なArduinoは **5V** のロジックレベル
- 今回使用する **ESP32-S3** は **3.3V** のロジックレベル

**重要ポイント**:
- デバイスごとにロジックレベルが異なる
- 電圧レベルの違いを理解することが回路設計の基本

### 2. pinMode（ピンモード）の役割

**pinMode関数の目的**:
```cpp
pinMode(A1, INPUT);
```

- ピンを入力（INPUT）または出力（OUTPUT）として設定
- デフォルトでは全てのピンが **入力モード** に設定されている

**安全性の理由**:
- デフォルトが出力モードだと危険
- 出力先がGNDに接続されている場合、ショートする可能性
- Arduino、ESP、USBなどのマイコンは基本的に入力モードがデフォルト

### 3. ハイインピーダンス（High Impedance）

**ハイインピーダンスとは**:
- 抵抗値が **無限大に近い** 状態
- 電流がほとんど流れない
- 消費電力が非常に低い

**メリット**:
- 消費電力が低い
- 入力負荷が小さい

**デメリット**:
- **ノイズに弱い**（最大の問題点）
- 電圧が不安定になりやすい
- スイッチのチャタリング（chattering）などのノイズを拾いやすい

### 4. プルアップ抵抗の必要性

**問題**: スイッチをハイインピーダンスの入力ピンに直接接続すると...
- スイッチが押されていない時、入力ピンの電圧が不定（フローティング）
- ノイズの影響を受けやすい
- 誤動作の原因になる

**解決策**: **プルアップ抵抗を追加**

#### プルアップ抵抗の回路構成

```
3.3V --- [抵抗] --- ピン(A1) --- [スイッチ] --- GND
```

**動作原理**:
1. **スイッチが開いている時**:
   - 抵抗を通じて3.3Vが入力ピンに供給される
   - ピンはHIGH（3.3V）の状態

2. **スイッチが閉じている時**:
   - 入力ピンがGNDに接続される
   - ピンはLOW（0V）の状態

**メリット**:
- ノイズに強い（抵抗が電圧を安定化）
- 確実な信号検出
- 誤動作の防止

### 5. 内蔵プルアップ抵抗

**Arduinoの便利機能**:
```cpp
pinMode(A1, INPUT_PULLUP);
```

**特徴**:
- マイコン内部にプルアップ抵抗が内蔵されている
- 外部抵抗が不要
- 配線がシンプルになる

**回路構成**:
```
ピン(A1) --- [スイッチ] --- GND
```

**動作**:
- 内蔵プルアップ抵抗が自動的に3.3Vに接続される
- スイッチが開いている時: HIGH
- スイッチが閉じている時: LOW

### 6. OR回路とAND回路

**OR回路（オア回路）**:
- 複数のスイッチのうち **どれか1つでも** 押されたら動作
- 用途: 複数の入力のいずれかで動作させたい場合

**AND回路（アンド回路）**:
- **全てのスイッチが同時に** 押されないと動作しない
- 用途: 安全装置（両手で操作など）

### 7. 配線の本数を減らす工夫

**問題提起**:
- スイッチごとに配線が必要
- 配線が増えると複雑になる

**解決策**:
- 内蔵プルアップ抵抗を使用
- スイッチをGNDに接続するだけで良い
- 配線本数を削減できる

**例**:
- 10個のスイッチ → 本来20本の配線が必要
- 内蔵プルアップ使用 → 10本（各スイッチ1本ずつ）+ 共通GND 1本 = 合計11本

---

## 技術用語解説

### ロジックレベル（Logic Level）
- デジタル回路で使用される電圧の基準値
- 5V、3.3V、1.8Vなどが一般的

### ハイインピーダンス（High Impedance）
- 抵抗値が非常に高い状態
- 電流がほとんど流れない
- 記号: Hi-Z

### プルアップ抵抗（Pull-up Resistor）
- 入力ピンを電源電圧に引き上げる抵抗
- デフォルト状態をHIGHにする

### プルダウン抵抗（Pull-down Resistor）
- 入力ピンをGNDに引き下げる抵抗
- デフォルト状態をLOWにする（今回の録音では言及なし）

### チャタリング（Chattering）
- スイッチの接点が物理的に振動して発生するノイズ
- ソフトウェアまたはハードウェアで対策が必要

### pinMode
- Arduinoでピンの入出力モードを設定する関数
- INPUT, OUTPUT, INPUT_PULLUP などのモードがある

---

## 学習ポイント

### 初心者向けの重要ポイント

1. **デフォルトは入力モード**
   - マイコンのピンはデフォルトで入力モードに設定されている
   - 安全性のための設計

2. **ハイインピーダンスの特性**
   - 消費電力は低いが、ノイズに弱い
   - プルアップ/プルダウン抵抗で対策

3. **INPUT_PULLUPの活用**
   - 内蔵プルアップ抵抗を使えば外部抵抗不要
   - 配線がシンプルになる

4. **スイッチ入力の基本**
   - スイッチだけ接続しても正しく動作しない
   - プルアップ/プルダウン抵抗が必須

### 中級者向けの応用ポイント

1. **ノイズ対策**
   - チャタリング対策（ソフトウェア/ハードウェア）
   - シールディング
   - フィルタ回路

2. **回路の最適化**
   - 配線本数の削減
   - 消費電力の最小化
   - 部品点数の削減

3. **電圧レベルの変換**
   - 5Vと3.3Vの混在する回路
   - レベルシフタの使用

---

## 実践的なコード例

### 基本的なスイッチ入力（プルアップ抵抗なし）

```cpp
// 外部プルアップ抵抗が必要
void setup() {
  pinMode(A1, INPUT);  // ピンを入力モードに設定
}

void loop() {
  int switchState = digitalRead(A1);
  if (switchState == LOW) {
    // スイッチが押された時の処理
  }
}
```

### 内蔵プルアップ抵抗を使用（推奨）

```cpp
// 外部抵抗不要
void setup() {
  pinMode(A1, INPUT_PULLUP);  // 内蔵プルアップ抵抗を有効化
}

void loop() {
  int switchState = digitalRead(A1);
  if (switchState == LOW) {
    // スイッチが押された時の処理
  }
}
```

### 複数スイッチの処理（OR回路的動作）

```cpp
void setup() {
  pinMode(A1, INPUT_PULLUP);
  pinMode(A2, INPUT_PULLUP);
}

void loop() {
  int switch1 = digitalRead(A1);
  int switch2 = digitalRead(A2);

  // どちらかのスイッチが押されたら
  if (switch1 == LOW || switch2 == LOW) {
    // 処理
  }
}
```

---

## 回路図（テキスト表現）

### プルアップ抵抗を使ったスイッチ入力

```
     3.3V
      |
     [R] (10kΩ抵抗)
      |
      +-------- A1ピン（入力）
      |
    [SW]（スイッチ）
      |
     GND
```

### 内蔵プルアップを使ったスイッチ入力

```
    (内蔵プルアップ抵抗)
      |
      +-------- A1ピン（INPUT_PULLUP）
      |
    [SW]（スイッチ）
      |
     GND
```

---

## まとめ

この録音では、マイコンを使った電子工作における最も基本的で重要な概念の一つである **プルアップ抵抗** について詳しく解説されています。

### 核心的な学び

1. **ハイインピーダンスの入力ピンは不安定**
   - そのままではノイズを拾いやすい

2. **プルアップ抵抗で安定化**
   - 抵抗を追加することで電圧を安定させる

3. **内蔵プルアップが便利**
   - `INPUT_PULLUP`を使えば外部抵抗不要
   - 配線がシンプルになる

### 実務への応用

- スイッチやボタンを使う全てのプロジェクトで必須の知識
- センサー入力の設計にも応用可能
- ノイズ対策の基礎となる考え方

### 次のステップ

- チャタリング対策（デバウンス処理）
- 割り込み処理（Interrupt）
- アナログ入力との違い
- I2C、SPIなどの通信プロトコル

---

**付録: 完全な文字起こし**

<details>
<summary>クリックして文字起こし全文を表示</summary>

```
でじゃあ、本当分かせると、RDの前コンティノはロジックレベルっていうのがあって、ロジックレベルは3.3Vとか5Vとかあります。で、RDの運のとかよく使ってるやつは5Vとかなんだけど、今回使うUSP3.2S3は3.3Vっていうロジックレベルです。それは、それを元に3.3Vをどうやって、スイッツの入力にしてくかったって、もう一気になるけど、最初にセットアップの関する中で、ピンモードっていう関するがあって、イメージ的に、A1のインプットっていると、このA1がインプットだよってことを認識しすくるわけで、最高はデフォルトで全部入力もどにあってるから、買ってに行こうあのアウトボットになっていたら、もしくもアウトボットする先がフェットに参っていて、もう大体に参っていたら、買って行こうさしちゃって危険でしょ?このアルディのとか、A部やるとかUSPとかを含めて、テッケーシフォーっていうのは、基本でも入力にするよってのが基本なんですね。なので、これを覚えておください。今回関しては、何にしたいかっていうと、スイッツから、スイッツの入力をアルディのにこういうのは、インプットしたいと、フォンバーは、フェットアップ関数で、A1のインプットと入れると、スイッツが加わるんだけど、1.共通的な力がないことがあって、それはインプットっていうのは、ハイインプイダンスになっているのね。ハイインプイダンスになっていると、テーコー質が無限という意味があるわけで、はい、つまり、何かコアの電流だがすときに、経光っていうのがないと、デーア装検知できなくて、フェミシングできないわけ。だから、ハイインプイダンスっていうのが、もう、いちめが多分とか、そういうレベルで、このテーコー質が無限にこういう高いと、入力不可能的に低くて、スイッツが検知しやすいとか。でも、フォンデメリーとかって、入力不可能的に、低いと、当然、流れる電流も少なくて、消費電力も下がるんだけど、フォンブのノイツをすごく広いやすいの。だから、その例えば、シッツで、シャタリングっていうのがあって、シャタリングっていうのは、シャタリングは、シャタリングは実は、シッツと、別にシッツと区域の問題があるんだけど、例えば、今回みたいに、24ボルトとか、モーターとかのあるときに、ノイツ広っちゃって、ノイツがこの映画に行こう流れてきたと、例えば、今、この回路って、じゃあ、自体と合ってるかというと、あるディーのグランドピンアルジャン、グランドと、映画の直接、スイッツさんは行こう。今回は、おわかいろだから、スイッツがここを合って、どれかいコンスイッツが押されたら、なんていうの?オリナルっていう感じ。ちょっと、ちょっと、わらかった。スイッツが2つあって、さらに、これが、どうじんこわのコンスさんがってる。このメンバーンは、ひやりワンスさんが出て、しさぶんは、右ワンスさんが出てる。こういう感じ。これは、おわってのは、どれか、映画の静置とか、どれかが、1個されたら、変発ながって、いくよっていうかいよだから、両方を、アンドカイルは、1個、アンドカイルっていうのは、こうさよっていって、両方のスッチがオンになんないと、電気があるなよって言う分かいろはどれかいっこはされたらオンになるよって感じでだから一般的に言うとこういうスッチが終わってこうあの、絵人にこう繋がってのはどこかやるの一般かオーは減れるつでこんな感じでこうこの辺りつなるっていうのがこの会話だよねですはいこの感じになるのでこの状態度スッチが押されたらグランドになって行くんだけど1個くらい問題がありますと絵人っていうのはハイインピーだんすだからここのスッチから困るのを用意するめっちゃ広がけ広がけしかも絵人の電圧が今回は育ったやつに揺力だからなんかめっちゃこうなんかなんていうの?ハイインピーだんすあればあるほどマーリの声と広がるからなんかこわくはないよねではグランドされたらバーンでかもエアングランドに落ちるからアバレが押さえられるんだけどじゃあ花されたり両方をハンサートとかつまりつつが下に行っている時にこいつどうなるのどうなってるかとそのお白スコップで見るとここはここはずつがつつコンタクトバーリここでやつ時間ティつこンタクトとグランドを力つくらんどになるわけこのバーリつがコンタクトしないバーどうなるかと環境の存在の昇広ちゃってこんなにこんなにこうなっちゃうんだよねここにくるとはグランド落ちるから待ちがってこれがグランドクスコンタクト3人やかって半端したわけやばいしろとねそういうその中も10名石があるからじゃあどうすんのかになるなとに二つあってソフトはできないかいけソフトをハードはできないかいけソフトはハードはとりあってここに1個もおける3点3棚とつまりA番にフラップの低光をつけてで低光先には3点3棚とインカスにそうすると何を殺すかと何もすると前と3点3点2点2点どこでねと3点3点が低光回してこういう3点3がインカスルージャンその時でツガコンタクトするとグランドチリジャンパンとチリとソフトシャンちゃんともける低光があるか大丈夫かなでソフトすると3点3棚とグランド低光低光がグランドグランドでソフトしたらグランドグランドグランドをチリオッケ3点3が映画されてるからここに電流が流れるこの感じで3点3棚とグランドをチリオッケパンとグランドをフラップするとノイスソフェンブ3点3に引き上けてくれてちゃんと電流が流れる丁度があるんだけどフラップするのはもう一瞬だからやるんだけどフラップというカクト前込んだかでフラップするとフラップでテーコが入っていてフラップこいつとマジことがってくれるよく出したらフラップでフラップでフラップでこれが自然できちゃうからいらないんだよねフラップでそうすると何が痛かったとたきのフラップするとフラップするとそうすると早くかかるスーチムがでこでこ3点3の中使わなきゃいけないともつなのはこの発想なんでねもう一回フラップでフラップするとそれでもメインカイロかわにビービーがこれもっていったらスーチャイ1個だけいいちゃうフラップでビービーでこれがMSでビービーでどっちにしろMBカイロはえ、これMSカイロはいらないんだよねみんなはいらないといらないとビービーカイロでもいらないのこれフラップするのね感じそれで結果だけにフェンは5本になるのねとかそう5本中で10本のフリッチ系フリッチ系ブルでドアサンシックを考えるだけでよくてスーチャインポンだけでいいいいポンだけでいいスーチャインポンだけでいいスーチャインポンだけでいいスーチャインポンだけでいいいつもユーナススーチャインポンが olhoに homosexualなobs力っていうナイムハッチタロナこんな当り次現点、フリットフリット踊よし普通で車isionsですや Diegomアンダンフリットをすごいぐらい神なす gestures
```

</details>

---

**生成日**: 2025年10月14日
**ツール**: OpenAI Whisper tiny model
**処理時間**: 約35秒
