# TX/RXピンアサインとコネクタピン配置の指示

**日付**: 2025-10-17
**音声ファイル**: [tx-rx-connector-pinout-2025-10-17.m4a](audio-transcriptions/tx-rx-connector-pinout-2025-10-17.m4a)
**プロジェクト**: FU@ComoNe (名古屋チューブインスタレーション)
**対象**: 評価ボード設計（Grid Ring, Pitch Ring, GY85 Ring）

---

## 📋 要旨

UART通信（TX/RX）のピンアサインとシルク印刷の表記、4極ステレオジャックのピン配置順序について、重要な設計指示。

---

## 🔌 UART通信の基本原則

### TX/RXクロス接続の重要性

**マイコンA ↔ マイコンB の接続:**

```
マイコンA の TX → マイコンB の RX
マイコンA の RX → マイコンB の TX
```

- **TX (Transmit)**: 送信ピン
- **RX (Receive)**: 受信ピン
- **必ずクロス接続**: TX同士、RX同士を接続すると通信不可、最悪の場合ピン破損の可能性

### Primary/Secondary (旧Master/Slave) の考え方

- **Primary (プライマリー)**: メインマイコン（今回はウィンチ側）
- **Secondary (セカンダリー)**: サブマイコン（今回は筒・評価ボード側）

**今回の構成:**
- **Primary**: ウィンチ（鈴木さん担当）
- **Secondary**: 筒・評価ボード（Grid Ring, Pitch Ring, GY85 Ring）

---

## 🎯 評価ボード側の設計指示

### シルク印刷の表記方法

**Secondary側（筒・評価ボード）のPCBには以下のようにシルク印刷:**

#### 4極ステレオジャック付近のシルク表記

```
TX from Winch  →  (RP2040のRXピンに接続)
RX from Winch  →  (RP2040のTXピンに接続)
```

または

```
TX ← (矢印でウィンチ方向を示す)
RX ← (矢印でウィンチ方向を示す)
```

**ポイント:**
- ジャック側には「ウィンチから来るTX」「ウィンチから来るRX」と表記
- これをRP2040のRX/TXに**クロス接続**する
- Secondary側のPCBだけ見ても接続が明確になる

---

## 🔧 4極ステレオジャックのピン配置順序

### 推奨ピン配置（安全性重視）

#### 現在の一般的な配置
```
先端 (Tip)       → GND
リング1 (Ring1)  → 24V
リング2 (Ring2)  → TX
根元 (Sleeve)    → RX
```

#### **推奨配置（安全性向上）**

```
先端 (Tip)       → 24V
リング1 (Ring1)  → TX
リング2 (Ring2)  → RX
根元 (Sleeve)    → GND
```

**理由:**

1. **抜き差し時の安全性**
   - プラグを差し込む際、先端から順に接触していく
   - 現在の配置（先端=GND）だと、24Vが先にショートする可能性
   - 推奨配置（根元=GND）なら、最後にGNDが接触するため安全

2. **24Vの攻撃性**
   - 24Vは高電圧なので、接触不良時の火花や短絡リスクが高い
   - 最後に接触する根元（Sleeve）をGNDにすることで、24Vの誤接触リスクを低減

3. **通信信号の保護**
   - TX/RXは中間のリング1, 2に配置
   - GNDとのショートリスクを最小化

---

## ✅ 設計チェックリスト

### Secondary側（評価ボード）PCB設計

- [ ] **4極ステレオジャックのピン配置**
  - [ ] 先端 (Tip) = 24V
  - [ ] リング1 = TX (from Winch)
  - [ ] リング2 = RX (from Winch)
  - [ ] 根元 (Sleeve) = GND

- [ ] **シルク印刷**
  - [ ] ジャック付近に「TX from Winch」「RX from Winch」と表記
  - [ ] または矢印でウィンチ方向を明示

- [ ] **RP2040ピンアサイン**
  - [ ] ジャックの「TX from Winch」→ RP2040の**RX (GPIO1)**
  - [ ] ジャックの「RX from Winch」→ RP2040の**TX (GPIO0)**
  - [ ] クロス接続を確認

- [ ] **ESD保護回路**
  - [ ] TX/RXラインにESD保護回路を追加

---

## 📝 補足事項

### Primary側（ウィンチ）の設計

- ウィンチ側（鈴木さん担当）のシルク印刷は変更不要
- ウィンチのマイコンTXは「TX」、RXは「RX」と表記されているはず
- Secondary側で正しくクロス接続されていれば問題なし

### 他のプロジェクトへの適用

この原則は他のUART通信を使用するプロジェクトでも適用可能：
- Primary/Secondaryの明確化
- Secondary側のシルク表記で「from Primary」と明示
- コネクタピン配置の安全性考慮（電源ピンを最後に接触）

---

## 🔗 関連ドキュメント

- [評価ボード設計タスク](../docs/tasks/evaluation-board-design.md)
- [Winch V2回路設計仕様](../docs/specs/winch-circuit-design.md)
- [V1システム分析](v1-analysis.md)

---

**音声文字起こし完了日**: 2025-10-17
**次のアクション**: 評価ボード設計（Grid Ring, Pitch Ring, GY85 Ring）に反映
