# 評価ボード - ハードウェア仕様書

## 📋 概要

評価ボード3枚（Grid Ring, Pitch Ring, GY85 Ring）のハードウェア詳細仕様。

---

## 🎯 基板構成

### 基板枚数と役割

| # | 基板名 | 役割 | センサー | 数量 |
|---|--------|------|----------|------|
| 1 | **Grid Ring** | IRセンサ基板 | Grid-EYE AMG8833 | 1枚 |
| 2 | **Pitch Ring** | メイン制御基板 | なし | 1枚 |
| 3 | **GY85 Ring** | IMUセンサ基板 | GY-85 (9軸) | 1枚 |

### 積層順序

```
[上部] Grid Ring (IRセンサ)
         ↓ 真鍮線6本
       Pitch Ring (メイン制御)
         ↓ 真鍮線6本
[下部] GY85 Ring (IMUセンサ)
```

---

## 📐 外形仕様

### PCB寸法（全基板共通）

| 項目 | 値 |
|------|-----|
| **外径** | **78mm**（確定） |
| **形状** | 円形 |
| **取付穴** | 対角4箇所（ナット用） |

### 画像参照

- **Pitch Ring**: `pitch_ring.png`
- **Grid/GY Ring**: `grid_gy_ring.png`（共通設計）

---

## ⚙️ 基板別詳細仕様

### 1️⃣ Pitch Ring（メイン制御基板）

#### マイコン

| 項目 | 仕様 |
|------|------|
| IC | RP2040 |
| クロック | 133MHz（デュアルコアARM Cortex-M0+） |
| メモリ | 264KB SRAM |
| GPIO | GPIO0=TX, GPIO1=RX, GPIO29=NeoPixel |
| I2C0 | GPIO4=SDA0, GPIO5=SCL0（GY-85用、内部プルアップ） |
| I2C1 | GPIO26=SDA1, GPIO27=SCL1（Grid-EYE用、内部プルアップ） |

#### コネクタ

**4極ステレオジャック（ウィンチ接続用）**

| ピン | 信号 | 方向 | 備考 |
|------|------|------|------|
| Tip | 24V | 入力 | 電源入力 |
| Ring1 | TX（ウィンチ→ボード） | 入力 | RP2040 GPIO1に接続（クロス） |
| Ring2 | RX（ボード→ウィンチ） | 出力 | RP2040 GPIO0に接続（クロス） |
| Sleeve | GND | - | グランド |

⚠️ **TX/RXはクロス接続**: ウィンチのTX → ボードのRX（GPIO1）、ウィンチのRX → ボードのTX（GPIO0）

**真鍮線接続（12箇所）**

| 信号 | 本数 | 接続先 | 備考 |
|------|------|--------|------|
| 24V | 2本 | Grid Ring + GY85 Ring | 電源供給 |
| GND | 2本 | Grid Ring + GY85 Ring | グランド |
| SDA1（GPIO26） | 1本 | Grid Ring | I2C1（Grid-EYE） |
| SCL1（GPIO27） | 1本 | Grid Ring | I2C1（Grid-EYE） |
| SDA0（GPIO4） | 1本 | GY85 Ring | I2C0（GY-85） |
| SCL0（GPIO5） | 1本 | GY85 Ring | I2C0（GY-85） |
| NeoPixel Data | 1本 | Grid Ring → GY85 Ring | シリアルデータ |
| 予備 | 3本 | - | 将来拡張用 |

#### NeoPixel配置

| 項目 | 仕様 |
|------|------|
| 表面 | 24個（円周配置） |
| 裏面 | 24個（円周配置） |
| **合計** | **48個** |
| データ線 | GPIO29からシリアル接続 |

#### 電源回路

| 項目 | 仕様 |
|------|------|
| 入力 | 24V（4極ジャックから） |
| DCDC | TPS54202DDCR（2A定格） |
| 出力 | 5V（NeoPixel用） |

---

### 2️⃣ Grid Ring（IRセンサ基板）

#### センサー

| 項目 | 仕様 |
|------|------|
| モジュール | Grid-EYE AMG8833（秋月電子） |
| 解像度 | 8×8 = 64ピクセル |
| 測定範囲 | 0°C〜80°C |
| インターフェース | I2C（アドレス: 0x68 or 0x69） |
| 電源 | 3.3V（DCDC降圧） |

#### コネクタ

**8ピンコネクタ（H1）**: Grid-EYE接続用

| ピン | 信号 | 備考 |
|------|------|------|
| 1 | 3.3V | 電源 |
| 2 | GND | グランド |
| 3 | SDA | I2C |
| 4 | SCL | I2C |
| 5-8 | NC | 未使用 |

**真鍮線接続（6箇所）**

| 信号 | 本数 | 接続元 | 接続先 |
|------|------|--------|--------|
| 24V | 1本 | Pitch Ring | DCDC入力 |
| GND | 1本 | Pitch Ring | グランド |
| SDA1（GPIO26） | 1本 | Pitch Ring | Grid-EYE（I2C1） |
| SCL1（GPIO27） | 1本 | Pitch Ring | Grid-EYE（I2C1） |
| NeoPixel In | 1本 | Pitch Ring | NeoPixel入力 |
| NeoPixel Out | 1本 | GY85 Ring | NeoPixel出力 |

#### NeoPixel配置

| 項目 | 仕様 |
|------|------|
| 表面 | 0個 |
| 裏面 | 24個（円周配置） |
| **合計** | **24個** |
| データ線 | Pitch Ring → Grid Ring → GY85 Ring |

#### 電源回路

| 項目 | 仕様 |
|------|------|
| 入力 | 5V（Pitch Ringから） |
| DCDC | SY8113IADC（3A定格） |
| 出力 | 3.3V（Grid-EYE用） |
| 出力容量 | 100mA |

---

### 3️⃣ GY85 Ring（IMUセンサ基板）

#### センサー

| 項目 | 仕様 |
|------|------|
| モジュール | GY-85（Aliexpress） |
| 構成 | 9軸IMU（加速度、ジャイロ、地磁気） |
| 加速度センサ | ADXL345（3軸） |
| ジャイロ | ITG3205（3軸） |
| 地磁気 | HMC5883L（3軸） |
| インターフェース | I2C |
| 電源 | 3.3V（DCDC降圧） |

#### コネクタ

**4ピンコネクタ（H2）**: GY-85接続用

| ピン | 信号 | 備考 |
|------|------|------|
| 1 | 3.3V | 電源 |
| 2 | GND | グランド |
| 3 | SDA | I2C |
| 4 | SCL | I2C |

**真鍮線接続（6箇所）**

| 信号 | 本数 | 接続元 | 備考 |
|------|------|--------|------|
| 24V | 1本 | Pitch Ring（直接） | DCDC入力 |
| GND | 1本 | Pitch Ring（直接） | グランド |
| SDA0（GPIO4） | 1本 | Pitch Ring（直接） | GY-85（I2C0） |
| SCL0（GPIO5） | 1本 | Pitch Ring（直接） | GY-85（I2C0） |
| NeoPixel In | 1本 | Grid Ring | NeoPixel入力 |
| 予備 | 1本 | - | 将来拡張用 |

#### NeoPixel配置

| 項目 | 仕様 |
|------|------|
| 表面 | 0個 |
| 裏面 | 24個（円周配置） |
| **合計** | **24個** |
| データ線 | Grid Ring → GY85 Ring（終端） |

#### 電源回路

| 項目 | 仕様 |
|------|------|
| 入力 | 5V（Grid Ring経由） |
| DCDC | SY8113IADC（3A定格） |
| 出力 | 3.3V（GY-85用） |
| 出力容量 | 100mA |

---

## 🔌 ワイヤ信号詳細

### Pitch Ring → Grid Ring（6本）

| # | 信号名 | 電圧/プロトコル | 用途 |
|---|--------|----------------|------|
| 1 | 24V | 24VDC | 電源供給 |
| 2 | GND | - | グランド |
| 3 | SDA1（GPIO26） | I2C1 3.3V | Grid-EYE通信 |
| 4 | SCL1（GPIO27） | I2C1 3.3V | Grid-EYE通信 |
| 5 | NeoPixel Data | 5V | LED制御 |
| 6 | NeoPixel Data Out | 5V | GY85 Ringへ |

### Pitch Ring → GY85 Ring（6本）

| # | 信号名 | 電圧/プロトコル | 用途 |
|---|--------|----------------|------|
| 1 | 24V | 24VDC | 電源供給 |
| 2 | GND | - | グランド |
| 3 | SDA0（GPIO4） | I2C0 3.3V | GY-85通信 |
| 4 | SCL0（GPIO5） | I2C0 3.3V | GY-85通信 |
| 5 | NeoPixel Data In | 5V | Grid Ringから |
| 6 | 予備 | - | 将来拡張用 |

---

## 💡 NeoPixelチェーン構成

### シリアル接続順序

```
RP2040 GPIO29
  → Pitch Ring 表面24個
  → Pitch Ring 裏面24個
  → Grid Ring 裏面24個
  → GY85 Ring 裏面24個
  （計144個）
```

### 電流仕様

| 項目 | 値 |
|------|-----|
| 1個あたり最大電流 | 60mA（RGB全点灯時） |
| 全144個最大電流 | 8.64A（理論値） |
| DCDC容量 | 2A |
| **運用方針** | **部分点灯必須**（同時26個以下推奨） |

---

## 📊 I2Cアドレス一覧

### Grid-EYE（AMG8833）

| デバイス | I2Cアドレス | 備考 |
|----------|------------|------|
| Grid-EYE | 0x68 or 0x69 | ジャンパー設定可能 |

### GY-85（9軸IMU）

| デバイス | I2Cアドレス | 備考 |
|----------|------------|------|
| ADXL345（加速度） | 0x53 | 固定 |
| ITG3205（ジャイロ） | 0x68 | 固定 |
| HMC5883L（地磁気） | 0x1E | 固定 |

⚠️ **アドレス衝突の可能性**: Grid-EYE（0x68）とITG3205（0x68）が衝突する場合、Grid-EYEを0x69に変更

---

## 🔧 部品リスト

### センサーモジュール

| 部品名 | 型番 | 購入先 | 数量 |
|--------|------|--------|------|
| Grid-EYE | AMG8833 | 秋月電子 | 1個 |
| GY-85 | 9軸IMU | Aliexpress | 1個 |

### コネクタ

| 部品名 | 仕様 | 用途 | 数量 |
|--------|------|------|------|
| 4極ステレオジャック | 3.5mm | ウィンチ接続 | 1個 |
| 8ピンコネクタ | - | Grid-EYE接続 | 1個 |
| 4ピンコネクタ | - | GY-85接続 | 1個 |

### 真鍮線

| 仕様 | 用途 | 数量 |
|------|------|------|
| φ1.0mm × 長さTBD | Pitch → Grid | 12本 |
| φ1.0mm × 長さTBD | Grid → GY85 | 6本 |

---

## 🔗 関連ドキュメント

| ドキュメント | 用途 |
|------------|------|
| [evaluation-board-design.md](../evaluation-board-design.md) | メインタスク管理 |
| [circuit-specifications.md](circuit-specifications.md) | 回路設計詳細 |
| [pcb-layout-guide.md](pcb-layout-guide.md) | PCBレイアウト設計ガイド |
