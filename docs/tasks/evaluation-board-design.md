# 評価ボード設計・発注準備・確認タスク

## 📅 スケジュール

| マイルストーン | 日時 | 詳細 |
|------------|------|------|
| **発注完了** | 2025-10-24 | JLCPCB発注締切 |
| **評価ボード到着** | 2025-10-24 | 名古屋現地テスト前日着 |
| **現地テスト** | 2025-10-31 | ウィンチ5台+評価ボード5台 |
| **上條さん研修** | 2025-11-13 (Thu) | Kyopalab弟子入り開始 |

## 🎯 目的

ウィンチが現場でワークするかを検証するための**筒評価ボード**を設計・発注する。

- 筒の完成時期が見積もれていない状況で、なるべく早く検証を実行
- ウィンチとのインターフェース（電源・通信・機械的負荷）を検証
- 1ヶ月程度の耐久テストでケーブル断線リスクを評価

## 📋 プロジェクト背景

| 項目 | 内容 |
|------|------|
| **現状** | ウィンチはほぼ完成、筒はまだ時間がかかる |
| **目標台数** | ウィンチ60台（予備14台）+ 筒60台（予備14台）|
| **現地テスト** | 2025-10-31にウィンチ5台+評価ボード5台を名古屋に持ち込み |
| **サポート体制** | 上條さん（名古屋大学院進学予定）が2025-11-13からKyopalabで研修、2026年4月から筒サポート実施 |

## ✅ 検証項目

| # | 検証内容 | 詳細 | 担当 |
|---|---------|------|------|
| 1 | **電圧チェック** | ウィンチから24Vが正しく供給されているか | 鈴木さん |
| 2 | **通信チェック** | データ通信（TX/RX）が正しく動作するか | 鈴木さん |
| 3 | **光り方チェック** | 検討糸（ケント紙固定用）を巻いて影・光の干渉パターンを確認 | 鈴木さん |
| 4 | **ケーブル断線チェック** | 繰り返しウィンチを上下させ、1ヶ月間耐久テストを実施<br>**テストプログラム**: kyopanが作成（双方向通信を定期的に実行し、1ヶ月間ログ記録） | kyopan（プログラム）<br>鈴木さん（実行） |

## 🔧 ハードウェア仕様

### マイコン

| 項目 | 仕様 |
|------|------|
| **型番** | RP2040（WaveShare製） |
| **TX** | GPIO0（固定・ESD保護回路追加） |
| **RX** | GPIO1（固定・ESD保護回路追加） |
| **NeoPixel** | GPIO29（固定） |
| **その他ピン** | 自由 |

### LED

| 項目 | 仕様 |
|------|------|
| **型番** | NeoPixel 2mm角 |
| **数量** | 24個 × 両面 = **合計48個** |
| **配置** | 円環状に両面実装 |
| **参考** | [V1 EasyEDAデザイン](https://pro.easyeda.com/editor#id=91112fbff8f44189b064c06750374ec7) |

### 電源回路

| 項目 | 仕様 |
|------|------|
| **入力電圧** | 24V（ウィンチから供給） |
| **出力電圧** | 5V |
| **出力電流** | 2A |
| **回路** | 24V→5V DCDC降圧回路（EasyEDA V1参照） |

### コネクタ

| 項目 | 仕様 |
|------|------|
| **型番** | ステレオ4極ジャック |
| **要件** | **脱落防止対策を施す**（揺らぎ対策） |

### 真鍮製ワイヤー（ケント紙固定・影検証用）

| 項目 | 仕様 |
|------|------|
| **素材** | 真鍮製 Φ1mm |
| **前方向** | 4本 |
| **後方向** | 4本 |
| **合計** | **8本** |
| **目的** | ケント紙前後固定 + 光の干渉パターン・影の検証 |

### 重量調整機構

| 項目 | 仕様 |
|------|------|
| **基本構造** | 表面実装用ナット × 4個（対角4点、対称配置） |
| **調整方法** | 鉄カラーで重量調整・固定 |
| **目標重量** | 実際の筒重量 × **1.2倍**（安全係数） |
| **設計裁量** | 下記2案のいずれか、または独自案 |

#### 重量調整の実装方法（2案）

| 案 | 方法 | 詳細 |
|----|------|------|
| **案1** | ナット+ネジ+カラー | ナットにネジを通し、カラーを複数個重ねて重量調整 |
| **案2** | 3Dプリントパーツ+重り | 3Dプリントパーツで構造を作り、重りを配置 |

**結論**: **どちらでもOK**。重要なのは**実際の筒重量を見積もり、それに合わせること**。

## ❌ スコープ外

以下は評価ボードには含めない：

- スリップリングの別途設計
- スラストベアリングの別途設計

## 📐 設計プロセス

### Step 1: 筒の重量見積もり

| # | タスク | 詳細 |
|---|--------|------|
| 1 | モジュールリスト作成 | 筒に搭載される/されうるモジュールを列挙 |
| 2 | 重量測定 | 各モジュールの実測重量を記録 |
| 3 | 合計重量計算 | 全モジュールの合計重量を算出 |
| 4 | 目標重量設定 | 合計重量 × **1.2倍**（安全係数） |

### Step 2: 回路設計

| # | タスク | 詳細 |
|---|--------|------|
| 1 | V1回路抽出 | [EasyEDA V1](https://pro.easyeda.com/editor#id=91112fbff8f44189b064c06750374ec7)（7枚構成）から必要回路を抽出 |
| 2 | RP2040配線 | TX=GPIO0, RX=GPIO1, NeoPixel=GPIO29（**固定**）|
| 3 | ESD保護回路 | TX/RXにESD保護回路を追加 |
| 4 | 電源回路 | 24V→5V 2A DCDC降圧回路を配置 |

### Step 3: 基板レイアウト

| # | コンポーネント | 配置要件 |
|---|--------------|---------|
| 1 | NeoPixel 48個 | 円環状、両面24個ずつ |
| 2 | RP2040 | 中央配置 |
| 3 | ステレオ4極ジャック | 脱落防止対策付き |
| 4 | 真鍮製ワイヤーポート | Φ1mm対応、8本（前4本+後4本） |
| 5 | 表面実装用ナット | 4個（対角・対称配置） |

### Step 4: JLCPCB発注

| 項目 | 内容 |
|------|------|
| **発注先** | JLCPCB |
| **到着目標** | **2025-10-24** |
| **数量** | 最低5枚（現地テスト用）+ 予備 |

## 📊 タスク分解

| # | Phase | タスク | 担当 | 期限 | Status |
|---|-------|--------|------|------|--------|
| 1 | 調査 | V1 EasyEDAファイル確認・必要回路抽出 | 鈴木さん | 10/17 | ⚪ Pending |
| 2 | 調査 | 筒の重量見積もり（モジュールリスト作成） | 鈴木さん | 10/17 | ⚪ Pending |
| 3 | 設計 | 回路図作成（EasyEDA） | 鈴木さん | 10/18 | ⚪ Pending |
| 4 | 設計 | PCBレイアウト設計 | 鈴木さん | 10/20 | ⚪ Pending |
| 4-1 | └ | NeoPixel 48個配置（両面24個ずつ） | 鈴木さん | 10/20 | ⚪ Pending |
| 4-2 | └ | RP2040配置・配線 | 鈴木さん | 10/20 | ⚪ Pending |
| 4-3 | └ | 電源回路（24V→5V 2A） | 鈴木さん | 10/20 | ⚪ Pending |
| 4-4 | └ | ステレオ4極ジャック配置 | 鈴木さん | 10/20 | ⚪ Pending |
| 4-5 | └ | ナット4個配置（対角・対称） | 鈴木さん | 10/20 | ⚪ Pending |
| 4-6 | └ | 真鍮製ワイヤーポート8個配置 | 鈴木さん | 10/20 | ⚪ Pending |
| 5 | レビュー | 設計レビュー | kyopan/Hirano | 10/21 | ⚪ Pending |
| 6 | 発注 | Gerberファイル生成 | 鈴木さん | 10/22 | ⚪ Pending |
| 7 | 発注 | **JLCPCB発注** | 鈴木さん | **10/24** | ⚪ Pending |
| 8 | 検証 | 評価ボード到着確認 | 鈴木さん | 10/24 | ⚪ Pending |
| 9 | テスト | ケーブル断線テストプログラム作成 | kyopan | 10/25 | ⚪ Pending |
| 10 | テスト | 名古屋現地テスト | kyopan/鈴木さん | 10/31 | ⚪ Pending |
| 11 | テスト | 1ヶ月耐久テスト開始 | 鈴木さん | 11/01〜 | ⚪ Pending |

## 📝 参考資料

| 資料名                     | リンク                                                                                                                                      | 用途                     |
| ----------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- | ---------------------- |
| **V1 EasyEDAファイル**      | [https://pro.easyeda.com/editor#id=91112fbff8f44189b064c06750374ec7](https://pro.easyeda.com/editor#id=91112fbff8f44189b064c06750374ec7) | 回路設計・PCBレイアウトの参考（7枚構成） |
| **RP2040 仕様書**          | WaveShare公式                                                                                                                              | ピンアサイン確認               |
| **NeoPixel 2mm角データシート** | Adafruit公式                                                                                                                               | LED配置・電源仕様             |
| **ステレオ4極ジャック仕様**        | 選定後追記                                                                                                                                    | コネクタ実装仕様               |

## 🔗 関連ドキュメント

| ドキュメント | 用途 |
|------------|------|
| [README](../../README.md) | プロジェクト概要 |
| [TODO](../../TODO.md) | プロジェクト全体のTODO |
| [音声文字起こし](../../notes/task-instructions-transcription-2025-10-16.md) | タスク指示の詳細 |

## 📞 質問・レビュー連絡先

| 担当 | 対応内容 |
|------|---------|
| **kyopan** | 回路設計、ピンアサイン、V1 EasyEDAファイルの説明 |
| **Hirano** | 設計レビュー、実装アドバイス |
| **上條さん**（2025-11-13〜） | 筒サポート（研修開始後）|

---

## 📌 重要な注意事項

### V1との違い

- **V1**: 7枚構成の複雑な基板
- **評価ボード**: シンプルな1枚基板（必要最小限の機能）

### 固定すべきピンアサイン（変更禁止）

```
TX        → GPIO0  (ESD保護回路付き)
RX        → GPIO1  (ESD保護回路付き)
NeoPixel  → GPIO29
```

### その他のピンは自由に設計してOK

---

## ✅ 完了条件

- [ ] JLCPCB発注完了（2025-10-24まで）
- [ ] 評価ボード5枚以上が10/24に到着
- [ ] 筒の目標重量（×1.2倍）を反映した重量調整機構
- [ ] 全検証項目（電圧・通信・光・耐久）が実行可能な構成